;
; Laravel Queue Workers Configuration
; Organized by priority and function
;
; All programs inherit from [program:defaults]

[group:laravel-queues]
programs=laravel-callback,laravel-optout,laravel-sms-processing,laravel-sms-update,laravel-invoice-processing
priority=100

; Callback Queue (Priority 300)
[program:laravel-callback]
process_name=%(program_name)s_%(process_num)02d
directory=/var/www/html/fuelrod
command=php artisan queue:work --queue=call-back --sleep=%(ENV_QUEUE_SLEEP)s --tries=%(ENV_QUEUE_MAX_TRIES)s --timeout=%(ENV_QUEUE_TIMEOUT)s 
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
numprocs=1
stdout_logfile=/var/log/supervisor/laravel-callback.log
stderr_logfile=/var/log/supervisor/laravel-callback-error.log
stopwaitsecs=%(ENV_QUEUE_TIMEOUT)s
priority=300
inherit=common

; Opt-out Queue (Priority 400)
[program:laravel-optout]
process_name=%(program_name)s_%(process_num)02d
directory=/var/www/html/fuelrod
command=php artisan queue:work --queue=opt-out --sleep=%(ENV_QUEUE_SLEEP)s --tries=%(ENV_QUEUE_MAX_TRIES)s --timeout=%(ENV_QUEUE_TIMEOUT)s 
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
numprocs=2
stdout_logfile=/var/log/supervisor/laravel-optout.log
stderr_logfile=/var/log/supervisor/laravel-optout-error.log
stopwaitsecs=%(ENV_QUEUE_TIMEOUT)s
priority=400
inherit=defaults

; SMS Processing Queue (Priority 200)
[program:laravel-sms-processing]
process_name=%(program_name)s_%(process_num)02d
directory=/var/www/html/fuelrod
command=php artisan queue:work --queue=sms-processing --sleep=%(ENV_QUEUE_SLEEP)s --tries=%(ENV_QUEUE_MAX_TRIES)s --timeout=%(ENV_QUEUE_TIMEOUT)s 
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
numprocs=%(ENV_QUEUE_WORKERS)s
stdout_logfile=/var/log/supervisor/laravel-sms-processing.log
stderr_logfile=/var/log/supervisor/laravel-sms-processing-error.log
stopwaitsecs=%(ENV_QUEUE_TIMEOUT)s
priority=200
inherit=defaults

; SMS Update Queue (Priority 200)
[program:laravel-sms-update]
process_name=%(program_name)s_%(process_num)02d
directory=/var/www/html/fuelrod
command=php artisan queue:work --queue=sms-update --sleep=%(ENV_QUEUE_SLEEP)s --tries=%(ENV_QUEUE_MAX_TRIES)s --timeout=%(ENV_QUEUE_TIMEOUT)s 
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
numprocs=%(ENV_QUEUE_WORKERS)s
stdout_logfile=/var/log/supervisor/laravel-sms-update.log
stderr_logfile=/var/log/supervisor/laravel-sms-update-error.log
stopwaitsecs=%(ENV_QUEUE_TIMEOUT)s
priority=200
inherit=defaults

; Invoice Processing Queue (Priority 200)
[program:laravel-invoice-processing]
process_name=%(program_name)s_%(process_num)02d
directory=/var/www/html/fuelrod
command=php artisan queue:work --queue=invoices --sleep=%(ENV_QUEUE_SLEEP)s --tries=%(ENV_QUEUE_MAX_TRIES)s --timeout=%(ENV_QUEUE_TIMEOUT)s 
autostart=true
autorestart=true
stopasgroup=true
killasgroup=true
numprocs=2
stdout_logfile=/var/log/supervisor/laravel-invoice-processing.log
stderr_logfile=/var/log/supervisor/laravel-invoice-processing-error.log
stopwaitsecs=%(ENV_QUEUE_TIMEOUT)s
priority=200
inherit=defaults